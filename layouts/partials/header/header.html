{{ if .Site.Params.alert -}}
  {{ partial "header/alert.html" . }}
{{ end -}}

{{/* Top Navigation Bar for Chainguard Academy */}}
<div class="top-nav-bar">
  <div class="top-nav-container">
    <div class="top-nav-left">
      <a href="/" class="top-nav-logo" aria-label="Chainguard Academy Home">
        <img src="/logos/linky-flat.svg" alt="Chainguard Academy" class="top-nav-logo-img" width="32" height="32">
        <span class="top-nav-brand">Chainguard Academy</span>
      </a>

      {{- $showFlexSearch := .Site.Params.options.flexSearch }}
      {{- if $showFlexSearch }}
      {{- if and (isset .Site.Params.options "searchsectionsshow") (not (eq .Site.Params.options.searchSectionsShow "ALL")) }}
      {{- $showFlexSearch = or (eq (len .Site.Params.options.searchSectionsShow) 0) (in .Site.Params.options.searchSectionsShow .Section) (and .IsHome (in .Site.Params.options.searchSectionsShow "HomePage")) }}
      {{- end }}
      {{- end }}

      {{ if $showFlexSearch -}}
      <div class="top-nav-search-container">
        <form class="top-nav-search-form">
          <svg class="top-nav-search-icon" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8.25 14.25C11.5637 14.25 14.25 11.5637 14.25 8.25C14.25 4.93629 11.5637 2.25 8.25 2.25C4.93629 2.25 2.25 4.93629 2.25 8.25C2.25 11.5637 4.93629 14.25 8.25 14.25Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M15.75 15.75L12.4875 12.4875" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <input class="search form-control top-nav-search-input" type="search" placeholder="Search" aria-label="Search" autocomplete="off">
        </form>
      </div>
      {{ end -}}

      <nav class="top-nav-links" aria-label="Primary navigation">
        {{ range .Site.Menus.topnav }}
          {{ if not .Parent }}
            <div class="top-nav-item">
              {{ if .HasChildren }}
                <button class="top-nav-link" aria-expanded="false" aria-haspopup="true">
                  {{ .Name }}
                  <svg class="top-nav-chevron" width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1 1.5L6 6.5L11 1.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </button>
                <div class="top-nav-dropdown">
                  <div class="top-nav-dropdown-content">
                    {{ range .Children }}
                      {{ if .HasChildren }}
                        <div class="top-nav-section">
                          <h3 class="top-nav-section-title">{{ .Name }}</h3>
                          <ul class="top-nav-section-list">
                            {{ range .Children }}
                              <li>
                                <a href="{{ .URL }}" class="top-nav-dropdown-link{{ if .Params.featured }} featured{{ end }}">
                                  {{ .Name }}
                                  {{ if .Params.external }}
                                    <svg class="external-icon" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                      <path d="M10.5 1.5L1.5 10.5M10.5 1.5H4.5M10.5 1.5V7.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                  {{ end }}
                                </a>
                              </li>
                            {{ end }}
                          </ul>
                        </div>
                      {{ else }}
                        <a href="{{ .URL }}" class="top-nav-dropdown-link{{ if .Params.featured }} featured{{ end }}">
                          {{ .Name }}
                          {{ if .Params.external }}
                            <svg class="external-icon" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path d="M10.5 1.5L1.5 10.5M10.5 1.5H4.5M10.5 1.5V7.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                          {{ end }}
                        </a>
                      {{ end }}
                    {{ end }}
                  </div>
                </div>
              {{ else }}
                <a href="{{ .URL }}" class="top-nav-link">{{ .Name }}</a>
              {{ end }}
            </div>
          {{ end }}
        {{ end }}
      </nav>
    </div>

    <button class="top-nav-mobile-toggle" type="button" aria-label="Toggle mobile menu" aria-expanded="false">
      <svg class="hamburger-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M3 6H21M3 12H21M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
      <svg class="close-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>

    <div class="top-nav-right">
      <button class="top-nav-dark-mode-toggle bottom-mode" type="button" aria-label="Toggle user interface mode">
        <span class="toggle-dark">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill="currentColor" d="M10 17C13.866 17 17 13.866 17 10C17 6.13401 13.866 3 10 3C9.72978 3 9.46309 3.01516 9.20039 3.04492C11.3261 3.83683 13 5.72656 13 8C13 10.7614 10.7614 13 8 13C5.72656 13 3.83683 11.3261 3.04492 9.20039C3.01516 9.46309 3 9.72978 3 10C3 13.866 6.13401 17 10 17Z"/>
          </svg>
        </span>
        <span class="toggle-light">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill="currentColor" d="M10 14C12.2091 14 14 12.2091 14 10C14 7.79086 12.2091 6 10 6C7.79086 6 6 7.79086 6 10C6 12.2091 7.79086 14 10 14Z"/>
            <path fill="currentColor" d="M10 0C10.5523 0 11 0.447715 11 1V3C11 3.55228 10.5523 4 10 4C9.44772 4 9 3.55228 9 3V1C9 0.447715 9.44772 0 10 0Z"/>
            <path fill="currentColor" d="M10 16C10.5523 16 11 16.4477 11 17V19C11 19.5523 10.5523 20 10 20C9.44772 20 9 19.5523 9 19V17C9 16.4477 9.44772 16 10 16Z"/>
            <path fill="currentColor" d="M20 10C20 10.5523 19.5523 11 19 11H17C16.4477 11 16 10.5523 16 10C16 9.44772 16.4477 9 17 9H19C19.5523 9 20 9.44772 20 10Z"/>
            <path fill="currentColor" d="M4 10C4 10.5523 3.55228 11 3 11H1C0.447715 11 0 10.5523 0 10C0 9.44772 0.447715 9 1 9H3C3.55228 9 4 9.44772 4 10Z"/>
            <path fill="currentColor" d="M17.0711 2.92893C17.4616 3.31946 17.4616 3.95262 17.0711 4.34315L15.6569 5.75736C15.2663 6.14788 14.6332 6.14788 14.2426 5.75736C13.8521 5.36683 13.8521 4.73367 14.2426 4.34315L15.6569 2.92893C16.0474 2.53841 16.6805 2.53841 17.0711 2.92893Z"/>
            <path fill="currentColor" d="M5.75736 14.2426C6.14788 14.6332 6.14788 15.2663 5.75736 15.6569L4.34315 17.0711C3.95262 17.4616 3.31946 17.4616 2.92893 17.0711C2.53841 16.6805 2.53841 16.0474 2.92893 15.6569L4.34315 14.2426C4.73367 13.8521 5.36683 13.8521 5.75736 14.2426Z"/>
            <path fill="currentColor" d="M17.0711 17.0711C16.6805 17.4616 16.0474 17.4616 15.6569 17.0711L14.2426 15.6569C13.8521 15.2663 13.8521 14.6332 14.2426 14.2426C14.6332 13.8521 15.2663 13.8521 15.6569 14.2426L17.0711 15.6569C17.4616 16.0474 17.4616 16.6805 17.0711 17.0711Z"/>
            <path fill="currentColor" d="M5.75736 5.75736C5.36683 6.14788 4.73367 6.14788 4.34315 5.75736L2.92893 4.34315C2.53841 3.95262 2.53841 3.31946 2.92893 2.92893C3.31946 2.53841 3.95262 2.53841 4.34315 2.92893L5.75736 4.34315C6.14788 4.73367 6.14788 5.36683 5.75736 5.75736Z"/>
          </svg>
        </span>
      </button>

      <a href="https://console.chainguard.dev" class="top-nav-login">Login</a>
      <a href="https://www.chainguard.dev/contact?utm_source=cg-academy&utm_medium=referral&utm_campaign=dev-enablement" class="top-nav-contact-btn">
        Contact
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12.8 6.4L12.8 3.2L9.6 3.2L9.6 6.4L12.8 6.4Z" fill="currentColor"/>
          <path d="M12.8 12.8L12.8 9.6L9.6 9.6L9.6 12.8L12.8 12.8Z" fill="currentColor"/>
          <path d="M9.6 3.2L9.6 -2.79753e-07L6.4 -4.19629e-07L6.4 3.2L9.6 3.2Z" fill="currentColor"/>
          <path d="M9.6 16L9.6 12.8L6.4 12.8L6.4 16L9.6 16Z" fill="currentColor"/>
          <path d="M9.6 9.6L9.6 6.4L6.4 6.4L6.4 9.6L9.6 9.6Z" fill="currentColor"/>
          <path d="M16 9.6L16 6.4L12.8 6.4L12.8 9.6L16 9.6Z" fill="currentColor"/>
          <path d="M3.2 9.6L3.2 6.4L-4.09445e-06 6.4L-4.23433e-06 9.6L3.2 9.6Z" fill="currentColor"/>
        </svg>
      </a>
    </div>
  </div>
</div>

<div class="suggestions shadow bg-white rounded d-none position-absolute search-content"></div>
